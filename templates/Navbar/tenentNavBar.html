{% load static %}

<!-- TENANT NAVBAR -->
<nav class="w-full max-w-5xl mt-6 bg-black/90 backdrop-blur-md border border-white/20 rounded-full px-6 py-3 
           flex justify-between items-center text-white z-20 mx-auto absolute left-0 right-0 top-0">

    <!-- Logo -->
    <div class="text-xl font-bold tracking-wide">
        PS6<span class="font-light">TENANT</span>
    </div>

    <!-- Desktop Menu -->
    <div class="hidden md:flex space-x-6 text-sm font-medium text-gray-200">
        <a href="{% url 'tenentapp:tenenthomepage' %}" class="hover:text-white transition">Home</a>
        <a href="{% url 'tenentapp:property_list' %}"
            class="hover:text-white transition {% if not user.is_authenticated %}restricted-link{% endif %}">Find
            Properties</a>
        <a href="{% url 'tenentapp:tenant_messages' %}"
            class="hover:text-white transition {% if not user.is_authenticated %}restricted-link{% endif %}">Messages</a>
        <a href="{% url 'tenentapp:tenent_profile' %}"
            class="hover:text-white transition {% if not user.is_authenticated %}restricted-link{% endif %}">Profile</a>
        <a href="{% url 'tenentapp:chatbot_view' %}" class="hover:text-white transition">ChatBot</a>

    </div>

    <!-- Desktop Auth -->
    <div class="hidden md:flex items-center gap-4">
        {% if user.is_authenticated %}
        <span class="text-sm font-medium text-white hidden md:block">
            Welcome {{ user.username|upper }}
        </span>

        <form action="{% url 'adminapp:logout_view' %}" method="POST">
            {% csrf_token %}
            <button type="submit"
                class="bg-white text-black text-sm font-semibold px-5 py-2 rounded-full hover:bg-gray-100 transition shadow-lg">
                Logout
            </button>
        </form>

        {% else %}
        <div class="relative group">
            <button
                class="bg-white text-black text-sm font-semibold px-5 py-2 rounded-full hover:bg-gray-100 transition shadow-lg flex items-center gap-2">
                Login/Register <i class="fas fa-chevron-down text-xs"></i>
            </button>

            <div class="absolute right-0 top-full pt-2 w-48 hidden group-hover:block">
                <div class="bg-white rounded-xl shadow-xl py-2 border border-gray-100 overflow-hidden">
                    <a href="{% url 'adminapp:login_or_register' %}"
                        class="block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-black transition flex items-center gap-2">
                        <i class="fas fa-user text-gray-400"></i> Tenant Login
                    </a>

                    <a href="{% url 'ownerapp:login_or_register1' %}"
                        class="block px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-black transition flex items-center gap-2">
                        <i class="fas fa-user-tie text-gray-400"></i> Owner Login
                    </a>
                </div>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Mobile Hamburger -->
    <button id="mobileMenuBtn" class="md:hidden text-white text-2xl">
        <i class="fas fa-bars"></i>
    </button>
</nav>


<!-- MOBILE MENU (TENANT VERSION) -->
<div id="mobileMenu" class="md:hidden hidden fixed top-20 left-0 right-0 mx-auto w-[90%]
           backdrop-blur-xl bg-black/70 border border-white/10 rounded-2xl shadow-2xl 
           p-6 space-y-5 z-50 animate-slideDown">

    <div class="space-y-4">

        <a href="{% url 'tenentapp:tenenthomepage' %}"
            class="block text-lg font-semibold text-white hover:text-gray-300">Home</a>

        <a href="{% url 'tenentapp:property_list' %}"
            class="block text-lg font-semibold text-white hover:text-gray-300 {% if not user.is_authenticated %}restricted-link{% endif %}">Find
            Properties</a>

        <a href="{% url 'tenentapp:tenant_messages' %}"
            class="block text-lg font-semibold text-white hover:text-gray-300 {% if not user.is_authenticated %}restricted-link{% endif %}">Messages</a>

        <a href="{% url 'tenentapp:tenent_profile' %}"
            class="block text-lg font-semibold text-white hover:text-gray-300 {% if not user.is_authenticated %}restricted-link{% endif %}">Profile</a>

        <a href="{% url 'tenentapp:chatbot_view' %}"
            class="block text-lg font-semibold text-white hover:text-gray-300">ChatBot</a>

    </div>

    <hr class="border-white/20">

    {% if user.is_authenticated %}

    <p class="text-sm text-gray-300 font-medium">Welcome {{ user.username|upper }}</p>

    <form action="{% url 'adminapp:logout_view' %}" method="POST">
        {% csrf_token %}
        <button
            class="w-full bg-white text-black py-2.5 rounded-full font-semibold shadow-md hover:bg-gray-100 transition">
            Logout
        </button>
    </form>

    {% else %}

    <div class="space-y-3">

        <a href="{% url 'adminapp:login_or_register' %}"
            class="block w-full bg-white text-black py-2.5 rounded-full text-center font-semibold shadow-md hover:bg-gray-200">
            Tenant Login
        </a>

        <a href="{% url 'ownerapp:login_or_register1' %}"
            class="block w-full bg-gray-200 text-black py-2.5 rounded-full text-center font-semibold shadow-md hover:bg-gray-300">
            Owner Login
        </a>

    </div>

    {% endif %}
</div>


<!-- SCRIPT FOR TOGGLING MOBILE MENU -->
<script>
    document.getElementById("mobileMenuBtn").addEventListener("click", function () {
        const menu = document.getElementById("mobileMenu");
        menu.classList.toggle("hidden");
    });

    // Handle restricted links
    document.addEventListener("DOMContentLoaded", function () {
        const restrictedLinks = document.querySelectorAll('.restricted-link');
        restrictedLinks.forEach(link => {
            link.addEventListener('click', function (e) {
                e.preventDefault();
                if (typeof showToast === 'function') {
                    showToast("Please log in first to access this feature.", "error");
                } else {
                    alert("Please log in first to access this feature.");
                }
            });
        });
    });
</script>

<!-- ANIMATION -->
<style>
    @keyframes slideDown {
        from {
            opacity: 0;
            transform: translateY(-10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .animate-slideDown {
        animation: slideDown 0.25s ease-out;
    }
</style>